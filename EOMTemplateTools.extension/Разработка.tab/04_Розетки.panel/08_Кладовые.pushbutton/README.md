# Плагин для расстановки оборудования в индивидуальных кладовых

## Что делает

Автоматически размещает в каждой кладовой:
1. **Щиток** - в центре помещения на высоте **1700мм**
2. **Выключатель** - у двери на ближайшей стене на высоте **900мм**
3. **Светильник** - в центре помещения на высоте **2700мм** (потолочный)

## Особенности

- Автоматический подбор семейств из конфигурации
- Дедупликация - не создает дубликаты при повторном запуске
- Валидация размещения с детальным отчетом
- Отчет о времени экономии (~15 минут на кладовую)
- Поддержка Revit Link (AR модель для чтения помещений)
- Автоматическое определение трансформации координат

## Настройка

Все настройки находятся в `config/rules.default.json`:

```json
{
  "storage_room_name_patterns": [
    "клад",
    "хранил",
    "кладов",
    "storage"
  ],
  "storage_panel_height_mm": 1700,
  "storage_switch_height_mm": 900,
  "storage_light_height_mm": 2700
}
```

## Использование

1. Открой EOM документ
2. Подключи AR как Revit Link
3. Перейди в `EOM` tab → `Розетки` panel → `Кладовые`
4. Выбери линк (если несколько)
5. Выбери семейства (если не найдены автоматически):
   - Светильник потолочный
   - Выключатель
   - Щиток
6. Плагин автоматически найдет все кладовые и разместит оборудование

## Структура файлов

```
08_Кладовые.pushbutton/
├── script.py          - Точка входа в плагин
├── orchestrator.py    - Основная логика размещения
├── adapters.py       - Работа с конфигом и линками
├── domain.py         - Геометрические операции
├── constants.py      - Константы и настройки
├── icon.svg          - Иконка кнопки
└── bundle.yaml       - Метаданные pyRevit
```

## Отчет о выполнении

Плагин выводит детальный отчет:
- Количество найденных кладовых
- Количество созданных элементов (щитки, выключатели, светильники)
- Статистика пропусков и дубликатов
- Результаты валидации (OK/FAIL/MISSING)
- Время экономии

## Требования к семействам

- **Светильник**: потолочный, category = LightingFixtures
- **Выключатель**: настенный, category = ElectricalEquipment
- **Щиток**: настенный, category = ElectricalEquipment

## Время работы

~15 минут на кладовую (ручная расстановка)
~5-10 секунд с плагином (автоматическая расстановка)
