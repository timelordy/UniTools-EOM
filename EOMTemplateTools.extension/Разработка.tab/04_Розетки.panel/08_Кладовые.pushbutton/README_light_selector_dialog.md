# Диалог выбора светильника для кладовых

## Что это

`light_selector_dialog.py` реализует улучшенный диалог выбора типа светильника для кладовых. Диалог заменяет базовый `forms.SelectFamilySymbol` и дает:

- двухпанельный интерфейс (категории слева, типы справа),
- поиск и фильтры,
- подробную информацию о выбранном типе,
- подсветку рекомендуемых и ранее выбранных типов,
- счетчик частоты использования,
- превью иконки семейства (если доступно в Revit API).

## Как работает

Функция `show_storage_light_selector_dialog(doc, cfg, rules)`:

1. Собирает все типы категории `OST_LightingFixtures`.
2. Классифицирует типы по категории: потолочные / настенные / все.
3. Помечает:
   - **рекомендуемые** (из `rules.family_type_names.light_ceiling_point` и `light_wall_bath`),
   - **ранее выбранные** (из `cfg.last_storage_light_symbol_id/uid`),
   - **частоту использования** (по количеству экземпляров в проекте).
4. Отображает диалог `LightSelectorDialog` и возвращает `(symbol, label)`.

Если WPF недоступен, диалог автоматически падает в `forms.SelectFromList`.

## Опции и фильтры

- **Категории**: потолочные / настенные / все.
- **Поиск**: фильтрация по имени семейства/типа.
- **Только активированные**: скрывает неактивированные типы.
- **Только рекомендуемые/ранние**: показывает только рекомендуемые и ранее выбранные.

## Использование в других плагинах

```python
from light_selector_dialog import show_storage_light_selector_dialog

symbol, label = show_storage_light_selector_dialog(doc, cfg, rules)
if symbol:
    # Используйте symbol дальше в размещении
    pass
```

## Возвращаемые значения

- `(symbol, label)` при успешном выборе
- `(None, None)` при отмене или ошибке
